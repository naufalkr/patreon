{"remainingRequest":"D:\\Kampus\\SEMESTER 5\\PBKK\\vue-nodejs-youtube-clone\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Kampus\\SEMESTER 5\\PBKK\\vue-nodejs-youtube-clone\\src\\components\\SettingsModal.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\Kampus\\SEMESTER 5\\PBKK\\vue-nodejs-youtube-clone\\src\\components\\SettingsModal.vue","mtime":1730447401960},{"path":"D:\\Kampus\\SEMESTER 5\\PBKK\\vue-nodejs-youtube-clone\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1730447643917},{"path":"D:\\Kampus\\SEMESTER 5\\PBKK\\vue-nodejs-youtube-clone\\node_modules\\babel-loader\\lib\\index.js","mtime":1730447645019},{"path":"D:\\Kampus\\SEMESTER 5\\PBKK\\vue-nodejs-youtube-clone\\node_modules\\vuetify-loader\\lib\\loader.js","mtime":1730447647589},{"path":"D:\\Kampus\\SEMESTER 5\\PBKK\\vue-nodejs-youtube-clone\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1730447643917},{"path":"D:\\Kampus\\SEMESTER 5\\PBKK\\vue-nodejs-youtube-clone\\node_modules\\vue-loader\\lib\\index.js","mtime":1730447647010}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgQXV0aGVudGljYXRpb25TZXJ2aWNlIGZyb20gJ0Avc2VydmljZXMvQXV0aGVudGljYXRpb25TZXJ2aWNlJw0KaW1wb3J0IG15VXBsb2FkIGZyb20gJ3Z1ZS1pbWFnZS1jcm9wLXVwbG9hZCcNCg0KZXhwb3J0IGRlZmF1bHQgew0KICBuYW1lOiAnU2V0dGluZ3NNb2RhbCcsDQogIHByb3BzOiBbJ29wZW5EaWFsb2cnXSwNCiAgZGF0YTogZnVuY3Rpb24oKSB7DQogICAgcmV0dXJuIHsNCiAgICAgIHNob3dDdXJyZW50UGFzc3dvcmQ6IGZhbHNlLA0KICAgICAgc2hvd05ld1Bhc3N3b3JkOiBmYWxzZSwNCiAgICAgIHZhbGlkOiBmYWxzZSwNCiAgICAgIGludGVydmFsOiB7fSwNCiAgICAgIHZhbHVlOiAwLA0KICAgICAgc2hvdzogZmFsc2UsDQogICAgICBydWxlczogWw0KICAgICAgICAodmFsdWUpID0+DQogICAgICAgICAgIXZhbHVlIHx8DQogICAgICAgICAgdmFsdWUuc2l6ZSA8IDUwMDAwMDAgfHwNCiAgICAgICAgICAnVmlkZW8gc2l6ZSBzaG91bGQgYmUgbGVzcyB0aGFuIDUgTUIhJw0KICAgICAgXSwNCiAgICAgIGNhdGVnb3JpZXM6IFsnUGVvcGxlJywgJ1RlY2hub2xvZ3knLCAnRmFzaGlvbiddLA0KICAgICAgdmlzaWJpbHR5OiBbJ1B1YmxpYycsICdQcml2YXRlJ10sDQogICAgICBmb3JtRGF0YTogew0KICAgICAgICBjaGFubmVsTmFtZTogdGhpcy4kc3RvcmUuZ2V0dGVycy5jdXJyZW50VXNlci5jaGFubmVsTmFtZSwNCiAgICAgICAgZW1haWw6IHRoaXMuJHN0b3JlLmdldHRlcnMuY3VycmVudFVzZXIuZW1haWwsDQogICAgICAgIGN1cnJlbnRQYXNzd29yZDogJycsDQogICAgICAgIG5ld1Bhc3N3b3JkOiAnJw0KICAgICAgfSwNCiAgICAgIGxvYWRpbmc6IHsNCiAgICAgICAgcGVyc29uYWxJbmZvOiBmYWxzZSwNCiAgICAgICAgcGFzc3dvcmQ6IGZhbHNlDQogICAgICB9LA0KICAgICAgaW1nRGF0YVVybDogYCR7cHJvY2Vzcy5lbnYuVlVFX0FQUF9VUkx9L3VwbG9hZHMvYXZhdGFycy8ke3RoaXMuJHN0b3JlLmdldHRlcnMuY3VycmVudFVzZXIucGhvdG9Vcmx9YCwNCiAgICAgIHVybDogYCR7cHJvY2Vzcy5lbnYuVlVFX0FQUF9VUkx9L2FwaS92MS9hdXRoL2F2YXRhcmAsDQogICAgICBoZWFkZXJzOiB7IEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHt0aGlzLiRzdG9yZS5nZXR0ZXJzLmdldFRva2VufWAgfQ0KICAgIH0NCiAgfSwNCiAgY29tcHV0ZWQ6IHsNCiAgICBkaWFsb2coKSB7DQogICAgICByZXR1cm4gdGhpcy5vcGVuRGlhbG9nDQogICAgfQ0KICB9LA0KICBtZXRob2RzOiB7DQogICAgYXN5bmMgc3VibWl0KCkgew0KICAgICAgaWYgKHRoaXMubG9hZGluZy5wZXJzb25hbEluZm8pIHJldHVybg0KICAgICAgdGhpcy5sb2FkaW5nLnBlcnNvbmFsSW5mbyA9IHRydWUNCg0KICAgICAgY29uc3QgdXNlciA9IGF3YWl0IEF1dGhlbnRpY2F0aW9uU2VydmljZS51cGRhdGVVc2VyRGV0YWlscyh7DQogICAgICAgIGNoYW5uZWxOYW1lOiB0aGlzLmZvcm1EYXRhLmNoYW5uZWxOYW1lLA0KICAgICAgICBlbWFpbDogdGhpcy5mb3JtRGF0YS5lbWFpbA0KICAgICAgfSkNCiAgICAgICAgLmNhdGNoKChlcnIpID0+IHsNCiAgICAgICAgICB0aGlzLmxvYWRpbmcucGVyc29uYWxJbmZvID0gZmFsc2UNCiAgICAgICAgICBjb25zdCBlcnJvcnMgPSBlcnIucmVzcG9uc2UuZGF0YS5lcnJvcg0KDQogICAgICAgICAgdGhpcy4kcmVmcy5wZXJzb25hbEluZm9Gb3JtLnNldEVycm9ycyh7DQogICAgICAgICAgICAnZW1haWwnOiBlcnJvcnMuZmluZCgoZXJyb3IpID0+IHsNCiAgICAgICAgICAgICAgcmV0dXJuIGVycm9yLmZpZWxkID09PSAnZW1haWwnDQogICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICA/IFsnVGhpcyBlbWFpbCBpcyBhbHJlYWR5IHRha2VuJ10NCiAgICAgICAgICAgICAgOiBudWxsLA0KICAgICAgICAgICAgJ0NoYW5uZWwgTmFtZSc6IGVycm9ycy5maW5kKChlcnJvcikgPT4gew0KICAgICAgICAgICAgICByZXR1cm4gZXJyb3IuZmllbGQgPT09ICdjaGFubmVsTmFtZScNCiAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgID8gWydUaGlzIGNoYW5uZWwgbmFtZSBpcyBhbHJlYWR5IHRha2VuJ10NCiAgICAgICAgICAgICAgOiBudWxsDQogICAgICAgICAgfSkNCiAgICAgICAgfSkNCiAgICAgICAgLmZpbmFsbHkoKCkgPT4gKHRoaXMubG9hZGluZy5wZXJzb25hbEluZm8gPSBmYWxzZSkpDQoNCiAgICAgIGlmICghdXNlcikgcmV0dXJuDQogICAgICBpZiAoDQogICAgICAgIHRoaXMuZm9ybURhdGEuY2hhbm5lbE5hbWUgIT09DQogICAgICAgICAgdGhpcy4kc3RvcmUuZ2V0dGVycy5jdXJyZW50VXNlci5jaGFubmVsTmFtZSB8fA0KICAgICAgICB0aGlzLmZvcm1EYXRhLmVtYWlsICE9PSB0aGlzLiRzdG9yZS5nZXR0ZXJzLmN1cnJlbnRVc2VyLmVtYWlsDQogICAgICApIHsNCiAgICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ3NpZ25PdXQnKQ0KICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCgnL3NpZ25pbicpDQogICAgICB9DQoNCiAgICAgIHRoaXMuY2xvc2VNb2RhbCgpDQogICAgfSwNCiAgICBhc3luYyBzdWJtaXRQYXNzd29yZCgpIHsNCiAgICAgIGlmICh0aGlzLmxvYWRpbmcucGFzc3dvcmQpIHJldHVybg0KDQogICAgICB0aGlzLmxvYWRpbmcucGFzc3dvcmQgPSB0cnVlDQoNCiAgICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBBdXRoZW50aWNhdGlvblNlcnZpY2UudXBkYXRlUGFzc3dvcmQoew0KICAgICAgICBjdXJyZW50UGFzc3dvcmQ6IHRoaXMuZm9ybURhdGEuY3VycmVudFBhc3N3b3JkLA0KICAgICAgICBuZXdQYXNzd29yZDogdGhpcy5mb3JtRGF0YS5uZXdQYXNzd29yZA0KICAgICAgfSkNCiAgICAgICAgLmNhdGNoKChlcnIpID0+IHsNCiAgICAgICAgICB0aGlzLmxvYWRpbmcucGFzc3dvcmQgPSBmYWxzZQ0KICAgICAgICAgIGNvbnN0IGVycm9ycyA9IGVyci5yZXNwb25zZS5kYXRhLmVycm9yDQoNCiAgICAgICAgICB0aGlzLiRyZWZzLnBhc3N3b3JkRm9ybS5zZXRFcnJvcnMoew0KICAgICAgICAgICAgJ0N1cnJlbnQgcGFzc3dvcmQnOiBlcnJvcnMuZmluZCgoZXJyb3IpID0+IHsNCiAgICAgICAgICAgICAgcmV0dXJuIGVycm9yLmZpZWxkID09PSAnY3VycmVudFBhc3N3b3JkJw0KICAgICAgICAgICAgfSkNCiAgICAgICAgICAgICAgPyBbJ0N1cnJlbnQgcGFzc3dvcmQgaXMgaW5jb3JyZWN0J10NCiAgICAgICAgICAgICAgOiBudWxsLA0KICAgICAgICAgICAgJ05ldyBwYXNzd29yZCc6IGVycm9ycy5maW5kKChlcnJvcikgPT4gew0KICAgICAgICAgICAgICByZXR1cm4gZXJyb3IuZmllbGQgPT09ICduZXdQYXNzd29yZCcNCiAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgID8gZXJyb3JzLmZpbmQoKGVycm9yKSA9PiB7DQogICAgICAgICAgICAgICAgICByZXR1cm4gZXJyb3IuZmllbGQgPT09ICduZXdQYXNzd29yZCcNCiAgICAgICAgICAgICAgICB9KS5tZXNzYWdlDQogICAgICAgICAgICAgIDogbnVsbA0KICAgICAgICAgIH0pDQogICAgICAgIH0pDQogICAgICAgIC5maW5hbGx5KCgpID0+ICh0aGlzLmxvYWRpbmcucGFzc3dvcmQgPSBmYWxzZSkpDQogICAgICBpZiAoIXVzZXIpIHJldHVybg0KDQogICAgICB0aGlzLmZvcm1EYXRhLmN1cnJlbnRQYXNzd29yZCA9ICcnDQogICAgICB0aGlzLmZvcm1EYXRhLm5ld1Bhc3N3b3JkID0gJycNCiAgICAgIHRoaXMuY2xvc2VNb2RhbCgpDQoNCiAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCdzaWduT3V0JykNCiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKCcvc2lnbmluJykNCiAgICB9LA0KICAgIGNsb3NlTW9kYWwoKSB7DQogICAgICB0aGlzLiRlbWl0KCdjbG9zZURpYWxvZycpDQogICAgfSwNCg0KICAgIHRvZ2dsZVNob3coKSB7DQogICAgICB0aGlzLnNob3cgPSAhdGhpcy5zaG93DQogICAgfSwNCiAgICBjcm9wU3VjY2VzcyhpbWdEYXRhVXJsLCBmaWVsZCkgew0KICAgICAgLy8gY29uc29sZS5sb2coJy0tLS0tLS0tIGNyb3Agc3VjY2VzcyAtLS0tLS0tLScpDQogICAgICBjb25zb2xlLmxvZyhmaWVsZCkNCiAgICAgIC8vIGNvbnNvbGUubG9nKGltZ0RhdGFVcmwpDQogICAgICB0aGlzLmltZ0RhdGFVcmwgPSBpbWdEYXRhVXJsDQogICAgICAvLyBjb25zb2xlLmxvZyh0aGlzLmltZ0RhdGFVcmwpDQogICAgICAvLyBjb25zb2xlLmxvZyhmaWVsZCkNCiAgICB9LA0KICAgIGNyb3BVcGxvYWRTdWNjZXNzKGpzb25EYXRhLCBmaWVsZCkgew0KICAgICAgLy8gY29uc29sZS5sb2coJy0tLS0tLS0tIHVwbG9hZCBzdWNjZXNzIC0tLS0tLS0tJykNCiAgICAgIGNvbnN0IHVzZXIgPSB0aGlzLiRzdG9yZS5nZXR0ZXJzLmN1cnJlbnRVc2VyDQogICAgICB1c2VyLnBob3RvVXJsID0ganNvbkRhdGEuZGF0YQ0KICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ3NpZ25pbicsIHVzZXIpDQogICAgICBjb25zb2xlLmxvZygnZmllbGQ6ICcgKyBmaWVsZCkNCiAgICB9LA0KDQogICAgY3JvcFVwbG9hZEZhaWwoc3RhdHVzLCBmaWVsZCkgew0KICAgICAgY29uc29sZS5sb2coJy0tLS0tLS0tIHVwbG9hZCBmYWlsIC0tLS0tLS0tJykNCiAgICAgIGNvbnNvbGUubG9nKHN0YXR1cykNCiAgICAgIGNvbnNvbGUubG9nKCdmaWVsZDogJyArIGZpZWxkKQ0KICAgIH0NCiAgfSwNCiAgY29tcG9uZW50czogew0KICAgIG15VXBsb2FkDQogIH0NCn0NCg=="},{"version":3,"sources":["SettingsModal.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuLA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"SettingsModal.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n  <v-dialog\r\n    v-model=\"dialog\"\r\n    persistent\r\n    transition=\"fab-transition\"\r\n    max-width=\"800\"\r\n    id=\"settings\"\r\n  >\r\n    <v-card tile>\r\n      <div class=\"d-flex justify-space-between mb-5\" id=\"modal-header\">\r\n        <v-card-title class=\"py-3\">Settings</v-card-title>\r\n\r\n        <v-btn icon text @click=\"closeModal\">\r\n          <v-icon>mdi-close</v-icon>\r\n        </v-btn>\r\n      </div>\r\n\r\n      <v-card-text>\r\n        <v-row>\r\n          <v-col\r\n            order=\"last\"\r\n            order-sm=\"last\"\r\n            order-md=\"first\"\r\n            order-lg=\"first\"\r\n            order-xl=\"first\"\r\n            cols=\"12\"\r\n            sm=\"12\"\r\n            md=\"8\"\r\n            lg=\"8\"\r\n            class=\"pt-0\"\r\n          >\r\n            <h3 class=\"mb-6 mt-0 pt-0\">Personal Information</h3>\r\n            <ValidationObserver\r\n              ref=\"personalInfoForm\"\r\n              v-slot=\"{ handleSubmit, reset }\"\r\n            >\r\n              <form\r\n                @submit.prevent=\"handleSubmit(submit)\"\r\n                @reset.prevent=\"reset\"\r\n              >\r\n                <ValidationProvider\r\n                  v-slot=\"{ errors }\"\r\n                  name=\"Channel Name\"\r\n                  rules=\"required|min:3\"\r\n                >\r\n                  <v-text-field\r\n                    v-model=\"formData.channelName\"\r\n                    :error-messages=\"errors\"\r\n                    label=\"Channel Name\"\r\n                    filled\r\n                    dense\r\n                  ></v-text-field>\r\n                </ValidationProvider>\r\n                <ValidationProvider\r\n                  v-slot=\"{ errors }\"\r\n                  name=\"email\"\r\n                  rules=\"required|email\"\r\n                >\r\n                  <v-text-field\r\n                    v-model=\"formData.email\"\r\n                    :error-messages=\"errors\"\r\n                    label=\"Email\"\r\n                    filled\r\n                    dense\r\n                  ></v-text-field>\r\n                </ValidationProvider>\r\n\r\n                <v-btn\r\n                  :loading=\"loading.personalInfo\"\r\n                  type=\"submit\"\r\n                  class=\"primary \"\r\n                  depressed\r\n                  >Submit</v-btn\r\n                >\r\n              </form>\r\n            </ValidationObserver>\r\n\r\n            <h3 class=\"mb-6 mt-6\">Change Password</h3>\r\n            <ValidationObserver\r\n              ref=\"passwordForm\"\r\n              v-slot=\"{ handleSubmit, reset }\"\r\n            >\r\n              <form\r\n                @submit.prevent=\"handleSubmit(submitPassword)\"\r\n                @reset.prevent=\"reset\"\r\n              >\r\n                <ValidationProvider\r\n                  v-slot=\"{ errors }\"\r\n                  name=\"Current password\"\r\n                  rules=\"required|min:5\"\r\n                >\r\n                  <v-text-field\r\n                    v-model=\"formData.currentPassword\"\r\n                    :append-icon=\"\r\n                      showCurrentPassword ? 'mdi-eye' : 'mdi-eye-off'\r\n                    \"\r\n                    :error-messages=\"errors\"\r\n                    :type=\"showCurrentPassword ? 'text' : 'password'\"\r\n                    name=\"Current password\"\r\n                    label=\"Current Password\"\r\n                    filled\r\n                    dense\r\n                    hint=\"At least 5 characters\"\r\n                    class=\"input-group--focused\"\r\n                    @click:append=\"showCurrentPassword = !showCurrentPassword\"\r\n                  ></v-text-field>\r\n                </ValidationProvider>\r\n                <ValidationProvider\r\n                  v-slot=\"{ errors }\"\r\n                  name=\"New password\"\r\n                  rules=\"required|min:5\"\r\n                >\r\n                  <v-text-field\r\n                    v-model=\"formData.newPassword\"\r\n                    :append-icon=\"showNewPassword ? 'mdi-eye' : 'mdi-eye-off'\"\r\n                    :error-messages=\"errors\"\r\n                    :type=\"showNewPassword ? 'text' : 'password'\"\r\n                    name=\"New password\"\r\n                    label=\"New Password\"\r\n                    filled\r\n                    dense\r\n                    hint=\"At least 5 characters\"\r\n                    class=\"input-group--focused\"\r\n                    @click:append=\"showNewPassword = !showNewPassword\"\r\n                  ></v-text-field>\r\n                </ValidationProvider>\r\n\r\n                <v-btn\r\n                  :loading=\"loading.password\"\r\n                  type=\"submit\"\r\n                  class=\"primary\"\r\n                  depressed\r\n                  >Submit</v-btn\r\n                >\r\n              </form>\r\n            </ValidationObserver>\r\n          </v-col>\r\n          <v-col\r\n            order-sm=\"1\"\r\n            cols=\"12\"\r\n            sm=\"12\"\r\n            md=\"4\"\r\n            lg=\"4\"\r\n            class=\"text-center\"\r\n          >\r\n            <v-btn text @click=\"toggleShow\">Upload Avatar</v-btn>\r\n            <my-upload\r\n              field=\"avatar\"\r\n              method=\"PUT\"\r\n              :headers=\"headers\"\r\n              @crop-success=\"cropSuccess\"\r\n              @crop-upload-success=\"cropUploadSuccess\"\r\n              @crop-upload-fail=\"cropUploadFail\"\r\n              v-model=\"show\"\r\n              :url=\"url\"\r\n              :width=\"200\"\r\n              :height=\"200\"\r\n              :noRotate=\"false\"\r\n              img-format=\"jpg\"\r\n              langType=\"en\"\r\n            ></my-upload>\r\n            <v-responsive\r\n              width=\"230\"\r\n              class=\"mx-auto\"\r\n              style=\"border-radius: 50%;\"\r\n            >\r\n              <div\r\n                v-if=\"$store.getters.currentUser.photoUrl == 'no-photo.jpg'\"\r\n                class=\"px-12\"\r\n                id=\"settings-image-placeholder\"\r\n              >\r\n                <v-icon>mdi-image-plus</v-icon>\r\n              </div>\r\n              <v-img v-else height=\"220\" :src=\"imgDataUrl\"></v-img>\r\n            </v-responsive>\r\n          </v-col>\r\n        </v-row>\r\n      </v-card-text>\r\n    </v-card>\r\n  </v-dialog>\r\n</template>\r\n\r\n<script>\r\nimport AuthenticationService from '@/services/AuthenticationService'\r\nimport myUpload from 'vue-image-crop-upload'\r\n\r\nexport default {\r\n  name: 'SettingsModal',\r\n  props: ['openDialog'],\r\n  data: function() {\r\n    return {\r\n      showCurrentPassword: false,\r\n      showNewPassword: false,\r\n      valid: false,\r\n      interval: {},\r\n      value: 0,\r\n      show: false,\r\n      rules: [\r\n        (value) =>\r\n          !value ||\r\n          value.size < 5000000 ||\r\n          'Video size should be less than 5 MB!'\r\n      ],\r\n      categories: ['People', 'Technology', 'Fashion'],\r\n      visibilty: ['Public', 'Private'],\r\n      formData: {\r\n        channelName: this.$store.getters.currentUser.channelName,\r\n        email: this.$store.getters.currentUser.email,\r\n        currentPassword: '',\r\n        newPassword: ''\r\n      },\r\n      loading: {\r\n        personalInfo: false,\r\n        password: false\r\n      },\r\n      imgDataUrl: `${process.env.VUE_APP_URL}/uploads/avatars/${this.$store.getters.currentUser.photoUrl}`,\r\n      url: `${process.env.VUE_APP_URL}/api/v1/auth/avatar`,\r\n      headers: { Authorization: `Bearer ${this.$store.getters.getToken}` }\r\n    }\r\n  },\r\n  computed: {\r\n    dialog() {\r\n      return this.openDialog\r\n    }\r\n  },\r\n  methods: {\r\n    async submit() {\r\n      if (this.loading.personalInfo) return\r\n      this.loading.personalInfo = true\r\n\r\n      const user = await AuthenticationService.updateUserDetails({\r\n        channelName: this.formData.channelName,\r\n        email: this.formData.email\r\n      })\r\n        .catch((err) => {\r\n          this.loading.personalInfo = false\r\n          const errors = err.response.data.error\r\n\r\n          this.$refs.personalInfoForm.setErrors({\r\n            'email': errors.find((error) => {\r\n              return error.field === 'email'\r\n            })\r\n              ? ['This email is already taken']\r\n              : null,\r\n            'Channel Name': errors.find((error) => {\r\n              return error.field === 'channelName'\r\n            })\r\n              ? ['This channel name is already taken']\r\n              : null\r\n          })\r\n        })\r\n        .finally(() => (this.loading.personalInfo = false))\r\n\r\n      if (!user) return\r\n      if (\r\n        this.formData.channelName !==\r\n          this.$store.getters.currentUser.channelName ||\r\n        this.formData.email !== this.$store.getters.currentUser.email\r\n      ) {\r\n        this.$store.dispatch('signOut')\r\n        this.$router.push('/signin')\r\n      }\r\n\r\n      this.closeModal()\r\n    },\r\n    async submitPassword() {\r\n      if (this.loading.password) return\r\n\r\n      this.loading.password = true\r\n\r\n      const user = await AuthenticationService.updatePassword({\r\n        currentPassword: this.formData.currentPassword,\r\n        newPassword: this.formData.newPassword\r\n      })\r\n        .catch((err) => {\r\n          this.loading.password = false\r\n          const errors = err.response.data.error\r\n\r\n          this.$refs.passwordForm.setErrors({\r\n            'Current password': errors.find((error) => {\r\n              return error.field === 'currentPassword'\r\n            })\r\n              ? ['Current password is incorrect']\r\n              : null,\r\n            'New password': errors.find((error) => {\r\n              return error.field === 'newPassword'\r\n            })\r\n              ? errors.find((error) => {\r\n                  return error.field === 'newPassword'\r\n                }).message\r\n              : null\r\n          })\r\n        })\r\n        .finally(() => (this.loading.password = false))\r\n      if (!user) return\r\n\r\n      this.formData.currentPassword = ''\r\n      this.formData.newPassword = ''\r\n      this.closeModal()\r\n\r\n      this.$store.dispatch('signOut')\r\n      this.$router.push('/signin')\r\n    },\r\n    closeModal() {\r\n      this.$emit('closeDialog')\r\n    },\r\n\r\n    toggleShow() {\r\n      this.show = !this.show\r\n    },\r\n    cropSuccess(imgDataUrl, field) {\r\n      // console.log('-------- crop success --------')\r\n      console.log(field)\r\n      // console.log(imgDataUrl)\r\n      this.imgDataUrl = imgDataUrl\r\n      // console.log(this.imgDataUrl)\r\n      // console.log(field)\r\n    },\r\n    cropUploadSuccess(jsonData, field) {\r\n      // console.log('-------- upload success --------')\r\n      const user = this.$store.getters.currentUser\r\n      user.photoUrl = jsonData.data\r\n      this.$store.dispatch('signin', user)\r\n      console.log('field: ' + field)\r\n    },\r\n\r\n    cropUploadFail(status, field) {\r\n      console.log('-------- upload fail --------')\r\n      console.log(status)\r\n      console.log('field: ' + field)\r\n    }\r\n  },\r\n  components: {\r\n    myUpload\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n#modal-header {\r\n  border-bottom: 1px solid rgb(238, 232, 232);\r\n}\r\n\r\n#settings-image-placeholder {\r\n  padding-top: 7em;\r\n  padding-bottom: 7em;\r\n  border: 2px dashed rgb(209, 209, 209);\r\n  border-radius: 50%;\r\n}\r\n\r\n@media (max-width: 700px) {\r\n  .vue-image-crop-upload {\r\n    .vicp-wrap {\r\n      width: 95%;\r\n      height: 550px;\r\n      .vicp-step2 .vicp-crop {\r\n        .vicp-crop-left {\r\n          float: none;\r\n\r\n          .vicp-range {\r\n            margin: auto;\r\n            margin-top: 30px;\r\n          }\r\n\r\n          & * {\r\n            margin-left: auto;\r\n            margin-right: auto;\r\n          }\r\n        }\r\n        .vicp-crop-right {\r\n          float: none;\r\n          margin-top: 30px;\r\n          .vicp-preview .vicp-preview-item {\r\n            display: inline-block;\r\n            float: none;\r\n          }\r\n          & * {\r\n            // margin-left: auto;\r\n            // margin-right: auto;\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>\r\n"]}]}