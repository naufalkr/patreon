{"remainingRequest":"D:\\Kampus\\SEMESTER 5\\PBKK\\vue-nodejs-youtube-clone\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Kampus\\SEMESTER 5\\PBKK\\vue-nodejs-youtube-clone\\src\\views\\Watch.vue?vue&type=style&index=0&lang=scss&","dependencies":[{"path":"D:\\Kampus\\SEMESTER 5\\PBKK\\vue-nodejs-youtube-clone\\src\\views\\Watch.vue","mtime":1730447401970},{"path":"D:\\Kampus\\SEMESTER 5\\PBKK\\vue-nodejs-youtube-clone\\node_modules\\css-loader\\dist\\cjs.js","mtime":1730447646010},{"path":"D:\\Kampus\\SEMESTER 5\\PBKK\\vue-nodejs-youtube-clone\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1730447648140},{"path":"D:\\Kampus\\SEMESTER 5\\PBKK\\vue-nodejs-youtube-clone\\node_modules\\postcss-loader\\src\\index.js","mtime":1730447646049},{"path":"D:\\Kampus\\SEMESTER 5\\PBKK\\vue-nodejs-youtube-clone\\node_modules\\sass-loader\\dist\\cjs.js","mtime":1730447644413},{"path":"D:\\Kampus\\SEMESTER 5\\PBKK\\vue-nodejs-youtube-clone\\node_modules\\vuetify-loader\\lib\\loader.js","mtime":1730447647589},{"path":"D:\\Kampus\\SEMESTER 5\\PBKK\\vue-nodejs-youtube-clone\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1730447643917},{"path":"D:\\Kampus\\SEMESTER 5\\PBKK\\vue-nodejs-youtube-clone\\node_modules\\vue-loader\\lib\\index.js","mtime":1730447647010}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKDQp2aWRlbyB7DQogIG1heC13aWR0aDogMTAwJTsNCn0NCg0KLmdyZXktY29sb3Igew0KICBjb2xvcjogIzdmN2Y3ZiAhaW1wb3J0YW50Ow0KfQ0KDQojYnRucyB7DQogIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCAjZTBkOGQ4Ow0KfQ0KDQpidXR0b24udi1idG4ucmVtb3ZlLWhvdmVyLWJnIHsNCiAgYmFja2dyb3VuZC1jb2xvcjogaW5pdGlhbCAhaW1wb3J0YW50Ow0KICAmOmhvdmVyIHsNCiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZjlmOWY5Ow0KICB9DQp9DQo="},{"version":3,"sources":["Watch.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkmBA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA","file":"Watch.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n  <div id=\"watch\" ref=\"watch\">\r\n    <v-container fluid>\r\n      <v-row>\r\n        <v-alert prominent class=\"mx-auto\" type=\"error\" v-if=\"errored\">\r\n          <v-row align=\"center\">\r\n            <v-col class=\"grow\">\r\n              <div class=\"title\">Error!</div>\r\n              <div>\r\n                Something went wrong, but don’t fret — let’s give it another\r\n                shot.\r\n              </div>\r\n            </v-col>\r\n            <v-col class=\"shrink\">\r\n              <v-btn @click=\"actions\">Take action</v-btn>\r\n            </v-col>\r\n          </v-row>\r\n        </v-alert>\r\n        <v-col v-else cols=\"11\" class=\"mx-auto\">\r\n          <v-row>\r\n            <v-col cols=\"12\" sm=\"12\" md=\"8\" lg=\"8\">\r\n              <v-skeleton-loader\r\n                type=\"card-avatar, article, actions\"\r\n                :loading=\"videoLoading\"\r\n                tile\r\n                large\r\n              >\r\n                <div ref=\"hello\">\r\n                  <v-responsive max-height=\"450\">\r\n                    <video\r\n                      ref=\"videoPlayer\"\r\n                      controls\r\n                      style=\"height: 100%; width: 100%\"\r\n                    >\r\n                      <source\r\n                        :src=\"`${url}/uploads/videos/${video.url}`\"\r\n                        type=\"video/mp4\"\r\n                      />\r\n                    </video>\r\n                  </v-responsive>\r\n\r\n                  <v-card flat tile class=\"card\">\r\n                    <v-card-title class=\"pl-0 pb-0\">{{\r\n                      video.title\r\n                    }}</v-card-title>\r\n                    <div\r\n                      class=\"d-flex flex-wrap justify-space-between\"\r\n                      id=\"btns\"\r\n                    >\r\n                      <v-card-subtitle\r\n                        class=\"pl-0 pt-0 pb-0 subtitle-1\"\r\n                        style=\"line-height: 2.4em;\"\r\n                      >\r\n                        {{ video.views }} views<v-icon>mdi-circle-small</v-icon\r\n                        >{{ dateFormatter(video.createdAt) }}\r\n                      </v-card-subtitle>\r\n                      <v-card-actions class=\"pt-0 pl-0\">\r\n                        <v-btn text @click=\"createFeeling('like')\"\r\n                          ><v-icon\r\n                            :class=\"\r\n                              `pr-2${\r\n                                feeling !== 'like'\r\n                                  ? ' grey--text text--darken-1'\r\n                                  : ''\r\n                              }`\r\n                            \"\r\n                            >mdi-thumb-up</v-icon\r\n                          >{{ video.likes }}</v-btn\r\n                        >\r\n\r\n                        <v-btn text @click=\"createFeeling('dislike')\"\r\n                          ><v-icon\r\n                            :class=\"\r\n                              `pr-2${\r\n                                feeling !== 'dislike'\r\n                                  ? ' grey--text text--darken-1'\r\n                                  : ''\r\n                              }`\r\n                            \"\r\n                            >mdi-thumb-down</v-icon\r\n                          >\r\n                          {{ video.dislikes }}</v-btn\r\n                        >\r\n                        <v-btn\r\n                          :href=\"`${url}/uploads/videos/${video.url}`\"\r\n                          text\r\n                          class=\"grey--text text--darken-1\"\r\n                          ><v-icon>mdi-download</v-icon> Download</v-btn\r\n                        >\r\n                        <!-- <v-btn text class=\"grey--text text--darken-1\"\r\n                          ><v-icon>mdi-share</v-icon> Share</v-btn\r\n                        >\r\n                        <v-btn text class=\"grey--text text--darken-1\"\r\n                          ><v-icon>mdi-playlist-plus</v-icon> Save</v-btn\r\n                        > -->\r\n                      </v-card-actions>\r\n                    </div>\r\n                  </v-card>\r\n\r\n                  <v-row class=\"justify-space-between\">\r\n                    <v-col cols=\"12\" sm=\"6\" md=\"5\" lg=\"5\">\r\n                      <v-card class=\"transparent\" flat>\r\n                        <v-list-item three-line>\r\n                          <v-list-item-avatar\r\n                            v-if=\"typeof video.userId !== 'undefined'\"\r\n                            size=\"50\"\r\n                          >\r\n                            <img\r\n                              v-if=\"video.userId.photoUrl !== 'no-photo.jpg'\"\r\n                              :src=\"\r\n                                `${getUrl}/uploads/avatars/${video.userId.photoUrl}`\r\n                              \"\r\n                              :alt=\"`${video.userId.channelName} avatar`\"\r\n                            />\r\n                            <v-avatar v-else color=\"red\">\r\n                              <span class=\"white--text headline \">\r\n                                {{\r\n                                  video.userId.channelName\r\n                                    .split('')[0]\r\n                                    .toUpperCase()\r\n                                }}</span\r\n                              >\r\n                            </v-avatar>\r\n                          </v-list-item-avatar>\r\n                          <v-list-item-content\r\n                            v-if=\"video.userId\"\r\n                            class=\"align-self-auto\"\r\n                          >\r\n                            <v-list-item-title\r\n                              class=\"font-weight-medium mb-1\"\r\n                              >{{ video.userId.channelName }}</v-list-item-title\r\n                            >\r\n                            <v-list-item-subtitle\r\n                              >{{ video.userId.subscribers }} subscribers\r\n                            </v-list-item-subtitle>\r\n                          </v-list-item-content>\r\n                        </v-list-item>\r\n                      </v-card>\r\n                    </v-col>\r\n                    <v-col cols=\"12\" sm=\"6\" md=\"4\" lg=\"4\">\r\n                      <div\r\n                        class=\"d-flex justify-end align-center\"\r\n                        v-if=\"typeof video.userId !== 'undefined'\"\r\n                      >\r\n                        <v-btn\r\n                          v-if=\"\r\n                            currentUser && video.userId._id !== currentUser._id\r\n                          \"\r\n                          :class=\"[\r\n                            { 'red white--text': !subscribed },\r\n                            {\r\n                              'grey grey--text lighten-3 text--darken-3': subscribed\r\n                            },\r\n                            'mt-6'\r\n                          ]\"\r\n                          tile\r\n                          large\r\n                          depressed\r\n                          :loading=\"subscribeLoading\"\r\n                          @click=\"subscribe\"\r\n                          >{{ !subscribed ? 'subscribe' : 'subscribed' }}</v-btn\r\n                        >\r\n\r\n                        <v-btn\r\n                          v-else-if=\"showSubBtn\"\r\n                          :class=\"[\r\n                            { 'red white--text': !subscribed },\r\n                            {\r\n                              'grey grey--text lighten-3 text--darken-3': subscribed\r\n                            },\r\n                            'mt-6'\r\n                          ]\"\r\n                          tile\r\n                          large\r\n                          depressed\r\n                          :loading=\"subscribeLoading\"\r\n                          @click=\"subscribe\"\r\n                          >{{ !subscribed ? 'subscribe' : 'subscribed' }}</v-btn\r\n                        >\r\n\r\n                        <!-- <v-btn\r\n                          v-if=\"\r\n                            video.userId && video.userId._id !== currentUser._id\r\n                          \"\r\n                          :class=\"[\r\n                            { 'red white--text': !subscribed },\r\n                            {\r\n                              'grey grey--text lighten-3 text--darken-3': subscribed\r\n                            },\r\n                            'mt-6'\r\n                          ]\"\r\n                          tile\r\n                          large\r\n                          depressed\r\n                          :loading=\"subscribeLoading\"\r\n                          @click=\"subscribe\"\r\n                          >{{ !subscribed ? 'subscribe' : 'subscribed' }}</v-btn\r\n                        > -->\r\n                        <!-- <v-btn icon class=\"ml-5 mt-6\"\r\n                          ><v-icon>mdi-bell</v-icon></v-btn\r\n                        > -->\r\n                      </div>\r\n                    </v-col>\r\n                    <v-col class=\"pl-11\" offset=\"1\" cols=\"11\" md=\"11\">\r\n                      <p>\r\n                        {{\r\n                          truncate\r\n                            ? truncateText(video.description, 150)\r\n                            : video.description\r\n                        }}\r\n                      </p>\r\n                      <v-btn text @click=\"show\" class=\"remove-hover-bg\"\r\n                        >Show More</v-btn\r\n                      >\r\n                    </v-col>\r\n                  </v-row>\r\n                </div>\r\n              </v-skeleton-loader>\r\n\r\n              <v-row>\r\n                <v-col v-if=\"video && video.status === 'public'\">\r\n                  <p class=\"mb-0\">{{ video.comments }} Comments</p>\r\n\r\n                  <AddComment\r\n                    @videoCommentLength=\"video.comments++\"\r\n                    :videoId=\"video._id\"\r\n                  />\r\n                  <CommentList\r\n                    @videoCommentLength=\"video.comments--\"\r\n                    :videoId=\"video._id\"\r\n                  />\r\n                </v-col>\r\n              </v-row>\r\n            </v-col>\r\n\r\n            <v-col cols=\"12\" sm=\"12\" md=\"4\" lg=\"4\">\r\n              <hr class=\"grey--text\" />\r\n              <h4 class=\"mb-3 mt-3\">Up next</h4>\r\n              <div\r\n                v-for=\"(video, i) in loading ? 12 : videos\"\r\n                :key=\"i\"\r\n                class=\"mb-5\"\r\n              >\r\n                <v-skeleton-loader\r\n                  class=\"mx-auto\"\r\n                  type=\"list-item-avatar-three-line\"\r\n                  :loading=\"loading\"\r\n                  tile\r\n                  large\r\n                >\r\n                  <v-card\r\n                    class=\"card\"\r\n                    tile\r\n                    flat\r\n                    v-if=\"!loading\"\r\n                    :to=\"`/watch/${video._id}`\"\r\n                  >\r\n                    <v-row no-gutters>\r\n                      <v-col class=\"mx-auto\" cols=\"12\" sm=\"12\" md=\"5\" lg=\"5\">\r\n                        <!-- <v-responsive max-height=\"100%\"> -->\r\n                        <v-img\r\n                          class=\"align-center\"\r\n                          height=\"110\"\r\n                          :src=\"\r\n                            `${url}/uploads/thumbnails/${video.thumbnailUrl}`\r\n                          \"\r\n                        >\r\n                        </v-img>\r\n                        <!-- </v-responsive> -->\r\n                      </v-col>\r\n                      <v-col>\r\n                        <div class=\"ml-2\">\r\n                          <v-card-title\r\n                            class=\"pl-2 pt-0 subtitle-1 font-weight-bold\"\r\n                            style=\"line-height: 1\"\r\n                          >\r\n                            {{ video.title }}\r\n                          </v-card-title>\r\n\r\n                          <v-card-subtitle\r\n                            class=\"pl-2 pt-2 pb-0\"\r\n                            style=\"line-height: 1\"\r\n                          >\r\n                            {{ video.userId.channelName }}<br />\r\n                            {{ video.views }} views<v-icon\r\n                              >mdi-circle-small</v-icon\r\n                            >\r\n                            {{ dateFormatter(video.createdAt) }}\r\n                          </v-card-subtitle>\r\n                        </div>\r\n                      </v-col>\r\n                    </v-row>\r\n                  </v-card>\r\n                </v-skeleton-loader>\r\n              </div>\r\n              <!-- <v-col cols=\"12\" sm=\"12\" md=\"12\" lg=\"12\"> -->\r\n              <infinite-loading :identifier=\"infiniteId\" @infinite=\"getVideos\">\r\n                <div slot=\"spinner\">\r\n                  <v-progress-circular\r\n                    indeterminate\r\n                    color=\"red\"\r\n                  ></v-progress-circular>\r\n                </div>\r\n                <div slot=\"no-results\"></div>\r\n                <span slot=\"no-more\"></span>\r\n                <div slot=\"error\" slot-scope=\"{ trigger }\">\r\n                  <v-alert prominent type=\"error\">\r\n                    <v-row align=\"center\">\r\n                      <v-col class=\"grow\">\r\n                        <div class=\"title\">Error!</div>\r\n                        <div>\r\n                          Something went wrong, but don’t fret — let’s give it\r\n                          another shot.\r\n                        </div>\r\n                      </v-col>\r\n                      <v-col class=\"shrink\">\r\n                        <v-btn @click=\"trigger\">Take action</v-btn>\r\n                      </v-col>\r\n                    </v-row>\r\n                  </v-alert>\r\n                </div>\r\n              </infinite-loading>\r\n              <!-- </v-col> -->\r\n            </v-col>\r\n          </v-row>\r\n        </v-col>\r\n      </v-row>\r\n    </v-container>\r\n    <signin-modal\r\n      :openModal=\"signinDialog\"\r\n      :details=\"details\"\r\n      @closeModal=\"signinDialog = false\"\r\n    />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport moment from 'moment'\r\nimport { mapGetters } from 'vuex'\r\nimport InfiniteLoading from 'vue-infinite-loading'\r\n\r\nimport VideoService from '@/services/VideoService'\r\nimport SubscriptionService from '@/services/SubscriptionService'\r\nimport FeelingService from '@/services/FeelingService'\r\nimport HistoryService from '@/services/HistoryService'\r\n\r\nimport SigninModal from '@/components/SigninModal'\r\nimport AddComment from '@/components/comments/AddComment'\r\nimport CommentList from '@/components/comments/CommentList'\r\n\r\nexport default {\r\n  data: () => ({\r\n    loading: false,\r\n    loaded: false,\r\n    errored: false,\r\n    videoLoading: true,\r\n    subscribed: false,\r\n    subscribeLoading: false,\r\n    showSubBtn: true,\r\n    feeling: '',\r\n    video: {},\r\n    videoId: '',\r\n    videos: [],\r\n    page: 1,\r\n    infiniteId: +new Date(),\r\n    truncate: true,\r\n    url: process.env.VUE_APP_URL,\r\n    signinDialog: false,\r\n    details: {}\r\n  }),\r\n  computed: {\r\n    ...mapGetters(['currentUser', 'getUrl', 'isAuthenticated'])\r\n  },\r\n  methods: {\r\n    async getVideo(id) {\r\n      this.errored = false\r\n      this.videoLoading = true\r\n      this.video = {}\r\n      try {\r\n        const video = await VideoService.getById(id)\r\n\r\n        if (!video) return this.$router.push('/')\r\n        this.video = video.data.data\r\n      } catch (err) {\r\n        this.errored = true\r\n        console.log(err)\r\n      } finally {\r\n        this.videoLoading = false\r\n        this.checkSubscription(this.video.userId._id)\r\n        this.checkFeeling(this.video._id)\r\n      }\r\n      if (this.currentUser && this.currentUser._id === this.video.userId._id) {\r\n        this.showSubBtn = false\r\n      } else {\r\n        this.showSubBtn = true\r\n      }\r\n\r\n      if (!this.isAuthenticated) return\r\n\r\n      if (\r\n        this.video.userId._id.toString() !== this.currentUser._id.toString() &&\r\n        this.video.status !== 'public'\r\n      )\r\n        return this.$router.push('/')\r\n\r\n      const data = {\r\n        type: 'watch',\r\n        videoId: this.video._id\r\n      }\r\n\r\n      await HistoryService.createHistory(data).catch((err) => console.log(err))\r\n    },\r\n    async getVideos($state) {\r\n      this.errored = false\r\n      if (!this.loaded) {\r\n        this.loading = true\r\n      }\r\n      const videos = await VideoService.getAll('public', { page: this.page })\r\n        .catch((err) => {\r\n          console.log(err)\r\n          this.errored = true\r\n        })\r\n        .finally(() => (this.loading = false))\r\n\r\n      if (typeof videos === 'undefined') return\r\n\r\n      if (videos.data.data.length) {\r\n        this.page += 1\r\n\r\n        this.videos.push(...videos.data.data)\r\n        if ($state) {\r\n          $state.loaded()\r\n        }\r\n\r\n        this.loaded = true\r\n      } else {\r\n        if ($state) {\r\n          $state.complete()\r\n        }\r\n      }\r\n    },\r\n    async checkSubscription(id) {\r\n      if (!this.isAuthenticated) return\r\n\r\n      this.loading = true\r\n      const sub = await SubscriptionService.checkSubscription({ channelId: id })\r\n        .catch((err) => {\r\n          console.log(err)\r\n        })\r\n        .finally(() => {\r\n          this.loading = false\r\n        })\r\n\r\n      if (!sub) return\r\n\r\n      if (!sub.data.data._id) this.subscribed = false\r\n      else this.subscribed = true\r\n    },\r\n    async checkFeeling(id) {\r\n      if (!this.isAuthenticated) return\r\n\r\n      this.loading = true\r\n      const feeling = await FeelingService.checkFeeling({ videoId: id })\r\n        .catch((err) => {\r\n          console.log(err)\r\n        })\r\n        .finally(() => {\r\n          this.loading = false\r\n        })\r\n\r\n      if (!feeling) return\r\n\r\n      if (feeling.data.data.feeling === 'like') this.feeling = 'like'\r\n      else if (feeling.data.data.feeling === 'dislike') this.feeling = 'dislike'\r\n    },\r\n    async createFeeling(type) {\r\n      if (!this.isAuthenticated) {\r\n        this.signinDialog = true\r\n        this.details = {\r\n          title:\r\n            type === 'like' ? 'Like this video?' : \"Don't like this video?\",\r\n          text: 'Sign in to make your opinion count.'\r\n        }\r\n        return\r\n      }\r\n      switch (true) {\r\n        case type === 'like' && this.feeling === '':\r\n          this.feeling = 'like'\r\n          this.video.likes++\r\n          // console.log('new like')\r\n          break\r\n        case type === 'like' && this.feeling === type:\r\n          this.feeling = ''\r\n          this.video.likes--\r\n          // console.log('remove like')\r\n          break\r\n        case type === 'like' && this.feeling === 'dislike':\r\n          this.feeling = 'like'\r\n          this.video.dislikes--\r\n          this.video.likes++\r\n          // console.log('change to like')\r\n          break\r\n        case type === 'dislike' && this.feeling === '':\r\n          this.feeling = 'dislike'\r\n          this.video.dislikes++\r\n          // console.log('new dislike')\r\n          break\r\n        case type === 'dislike' && this.feeling === type:\r\n          this.feeling = ''\r\n          this.video.dislikes--\r\n          // console.log('remove dislike')\r\n          break\r\n        case type === 'dislike' && this.feeling === 'like':\r\n          this.feeling = 'dislike'\r\n          this.video.likes--\r\n          this.video.dislikes++\r\n        // console.log('change to dislike')\r\n      }\r\n\r\n      const feeling = await FeelingService.createFeeling({\r\n        videoId: this.video._id,\r\n        type\r\n      }).catch((err) => {\r\n        console.log(err)\r\n      })\r\n\r\n      if (!feeling) return\r\n    },\r\n    async subscribe() {\r\n      if (!this.isAuthenticated) {\r\n        this.signinDialog = true\r\n        this.details = {\r\n          title: 'Want to subscribe to this channel?',\r\n          text: 'Sign in to subscribe to this channel.'\r\n        }\r\n        return\r\n      }\r\n      this.subscribeLoading = true\r\n      const sub = await SubscriptionService.createSubscription({\r\n        channelId: this.video.userId._id\r\n      })\r\n        .catch((err) => console.log(err))\r\n        .finally(() => {\r\n          this.subscribeLoading = false\r\n        })\r\n\r\n      if (!sub) return\r\n\r\n      if (!sub.data.data._id) {\r\n        this.subscribed = false\r\n        this.video.userId.subscribers--\r\n      } else {\r\n        this.subscribed = true\r\n        this.video.userId.subscribers++\r\n      }\r\n    },\r\n    async updateViews(id) {\r\n      const views = await VideoService.updateViews(id).catch((err) => {\r\n        console.log(err)\r\n      })\r\n      if (!views) return\r\n\r\n      this.video.views++\r\n    },\r\n    play(e) {\r\n      console.log(e)\r\n    },\r\n    actions() {\r\n      this.getVideo()\r\n    },\r\n    show(event) {\r\n      if (event.target.innerText === 'SHOW MORE') {\r\n        this.truncate = false\r\n        event.target.innerText = 'SHOW LESS'\r\n      } else {\r\n        this.truncate = true\r\n        event.target.innerText = 'SHOW MORE'\r\n      }\r\n    },\r\n    truncateText(string = '', num) {\r\n      if (string.length <= num) {\r\n        return string\r\n      }\r\n      return string.slice(0, num)\r\n    },\r\n    dateFormatter(date) {\r\n      return moment(date).fromNow()\r\n    }\r\n  },\r\n  components: {\r\n    AddComment,\r\n    CommentList,\r\n    SigninModal,\r\n    InfiniteLoading\r\n  },\r\n  mounted() {\r\n    this.getVideo(this.$route.params.id)\r\n    if (this.isAuthenticated) this.updateViews(this.$route.params.id)\r\n  },\r\n  beforeRouteUpdate(to, from, next) {\r\n    this.page = 1\r\n    ;(this.loading = false), (this.loaded = false), (this.videos = [])\r\n    this.infiniteId += 1\r\n    this.getVideo(to.params.id)\r\n    next()\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\">\r\nvideo {\r\n  max-width: 100%;\r\n}\r\n\r\n.grey-color {\r\n  color: #7f7f7f !important;\r\n}\r\n\r\n#btns {\r\n  border-bottom: 1px solid #e0d8d8;\r\n}\r\n\r\nbutton.v-btn.remove-hover-bg {\r\n  background-color: initial !important;\r\n  &:hover {\r\n    background-color: #f9f9f9;\r\n  }\r\n}\r\n</style>\r\n"]}]}